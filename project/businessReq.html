<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
<link rel="icon" href="images/favicon.ico">

<style>
/* CSS 변수 시스템 */
:root {
  --color-primary: #ff533f;
  --color-primary-light: #ff7a66;
  --color-primary-dark: #e63c28;
  --color-secondary: #6c757d;
  --color-neutral-100: #f8f9fa;
  --color-neutral-200: #e9ecef;
  --color-neutral-300: #dee2e6;
  --color-neutral-500: #adb5bd;
  --color-neutral-700: #495057;
  --color-neutral-800: #343a40;
  --color-neutral-900: #212529;
}
</style>

<div id="adminpage-container"></div>
<script>
    fetch('adminpage.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('adminpage-container').innerHTML = data;
            
            // 페이지 제목 변경
            document.getElementById('page-title').textContent = '업체요청 목록';
            
            // 현재 메뉴 활성화
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === 'businessReq.html') {
                    link.classList.add('active');
                }
            });
            
            // 콘텐츠 삽입
            const contentArea = document.getElementById('admin-content');
            contentArea.innerHTML = `
                <div id="tableWrapper">
                    <table class="table table-striped table-sm">
                        <colgroup>
                            <col style="width: 8%;">
                            <col style="width: 12%;">
                            <col style="width: 25%;">
                            <col style="width: 15%;">
                            <col style="width: 20%;">
                            <col style="width: 10%;">
                            <col style="width: 10%;">
                        </colgroup>
                        <thead>
                            <tr class="table-danger">
                                <th>아이디</th>
                                <th>업체 이름</th>
                                <th>업체 주소</th>
                                <th>업체 전화번호</th>
                                <th>업체 URL</th>
                                <th>승인</th>
                                <th>거절</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>기술 혁신가들</td>
                                <td>경기도 성남시 분당구 판교로 123</td>
                                <td>(031) 123-4567</td>
                                <td><a href="#">http://techinnovators.com</a></td>
                                <td>
                                    <button class="approveButton req" data-id="5">승인</button>
                                </td>
                                <td>
                                    <button class="cancelButton" data-id="5">거절</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>환경 솔루션</td>
                                <td>서울특별시 강남구 테헤란로 456</td>
                                <td>(02) 987-6543</td>
                                <td><a href="#">http://greenearth.com</a></td>
                                <td>
                                    <button class="approveButton req" data-id="5">승인</button>
                                </td>
                                <td>
                                    <button class="cancelButton" data-id="5">거절</button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>글로벌 핀테크</td>
                                <td>부산광역시 해운대구 해운대해변로 789</td>
                                <td>(051) 123-4567</td>
                                <td><a href="#">http://globalfintech.com</a></td>
                                <td>
                                    <button class="approveButton req" data-id="5">승인</button>
                                </td>
                                <td>
                                    <button class="cancelButton" data-id="5">거절</button>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>어반 건축가들</td>
                                <td>대구광역시 중구 동성로 1010</td>
                                <td>(053) 765-4321</td>
                                <td><a href="#">http://urbanarchitects.com</a></td>
                                <td>
                                    <button class="approveButton req" data-id="5">승인</button>
                                </td>
                                <td>
                                    <button class="cancelButton" data-id="5">거절</button>
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>신선 식품 마켓</td>
                                <td>광주광역시 북구 하남대로 2020</td>
                                <td>(062) 234-5678</td>
                                <td><a href="#">http://freshfoods.com</a></td>
                                <td>
                                    <button class="approveButton req" data-id="5">승인</button>
                                </td>
                                <td>
                                    <button class="cancelButton" data-id="5">거절</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
            
            // 버튼 이벤트 리스너 추가
            document.querySelectorAll('.approveButton').forEach(button => {
                button.addEventListener('click', function () {
                    const row = this.closest('tr');
                    this.innerText = '승인됨';
                    this.classList.remove('req');
                    this.classList.add('done');
                    this.disabled = true;
                    
                    row.querySelectorAll('.approveButton.req').forEach(btn => {
                        btn.disabled = true;
                    });
                    
                    const cancelButton = row.querySelector('.cancelButton');
                    cancelButton.innerText = '등록해제';
                    cancelButton.classList.add('deregister');
                });
            });

            document.querySelectorAll('.cancelButton').forEach(button => {
                button.addEventListener('click', function () {
                    const row = this.closest('tr');
                    if (!this.classList.contains('deregister')) {
                        row.remove();
                    } else {
                        row.remove();
                    }
                });
            });
        });
</script>

<style>
    #tableWrapper th {
        position: sticky;
        top: 0px;
    }

    #tableWrapper {
        overflow-x: hidden;
        overflow-y: scroll;
        height: 315px;
    }

    .approveButton {
        width: 82px;
        height: 26px;
        vertical-align: middle;
        background-color: inherit;
        border: 2px solid blue;
        border-radius: 5px;
        font-weight: bold;
    }

    .cancelButton {
        width: 106px;
        height: 26px;
        vertical-align: middle;
        background-color: inherit;
        border: 2px solid red;
        border-radius: 5px;
        font-weight: bold;
    }

    /* Webkit 브라우저를 위한 스타일 */
    #tableWrapper::-webkit-scrollbar {
        width: 12px;
    }

    #tableWrapper::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }

    #tableWrapper::-webkit-scrollbar-thumb {
        background-color: transparent;
        border-radius: 10px;
        background: var(--color-primary);
    }
</style>