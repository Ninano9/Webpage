<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
<link rel="icon" href="images/favicon.ico">

<style>
    /* CSS 변수 시스템 - 개선된 색상 팔레트 */
    :root {
        --color-primary: #ff533f;
        --color-primary-light: #ff7a66;
        --color-primary-dark: #e63c28;
        --color-secondary: #64748b;
        --color-success: #10b981;
        --color-warning: #f59e0b;
        --color-danger: #ef4444;
        --color-info: #06b6d4;
        --color-neutral-50: #f8fafc;
        --color-neutral-100: #f1f5f9;
        --color-neutral-200: #e2e8f0;
        --color-neutral-300: #cbd5e1;
        --color-neutral-400: #94a3b8;
        --color-neutral-500: #64748b;
        --color-neutral-600: #475569;
        --color-neutral-700: #334155;
        --color-neutral-800: #1e293b;
        --color-neutral-900: #0f172a;
    }
</style>

<div id="adminpage-container"></div>

<script>
    fetch('adminpage.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('adminpage-container').innerHTML = data;

            // 페이지 제목 변경
            document.getElementById('page-title').textContent = '공지등록';

            // 현재 메뉴 활성화
            const activateMenu = () => {
                const navLinks = document.querySelectorAll('.nav-link');
                if (navLinks.length > 0) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === 'noticeUpdate.html') {
                            link.classList.add('active');
                            console.log('공지등록 메뉴 활성화됨');
                        }
                    });
                } else {
                    setTimeout(activateMenu, 100);
                }
            };
            // DOM 로드 완료 후 메뉴 활성화
            setTimeout(activateMenu, 300);

            // admin-content에 정적 내용 추가
            const adminContent = document.getElementById('admin-content');
            if (adminContent) {
                adminContent.innerHTML = document.getElementById('adminContent').innerHTML;
            }

            // 이벤트 리스너 추가
            document.getElementById('btnWrite').addEventListener('click', function (event) {
                event.preventDefault();
                addNotice();
            });

            // 기존 삭제 버튼들에 이벤트 리스너 추가
            document.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', function () {
                    const id = this.getAttribute('data-id');
                    deleteBoard(id);
                });
            });
        });

    function deleteBoard(id) {
        const row = document.getElementById(`row${id}`);
        if (row) {
            if (confirm('정말로 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.')) {
                row.remove();
                alert('삭제가 완료되었습니다.');
            } else {
                alert('삭제가 취소되었습니다.');
            }
        } else {
            alert('삭제할 항목을 찾을 수 없습니다.');
        }
    }

    function addNotice() {
        const title = document.getElementById('title').value;
        const content = document.getElementById('content').value;
        const date = new Date().toLocaleDateString();

        if (!title || !content) {
            alert('제목과 내용을 모두 입력해주세요.');
            return;
        }

        const newRow = document.createElement('tr');
        const rowCount = document.querySelectorAll('#noticeTableBody tr').length + 1;
        newRow.id = `row${rowCount}`;

        newRow.innerHTML = `
            <td>${title}</td>
            <td class="text-truncate" style="max-width: 300px;" title="${content}">${content}</td>
            <td>${date}</td>
            <td>
                <button class="action-btn delete-btn" data-id="${rowCount}" title="삭제">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;

        // 새 공지사항을 맨 위에 추가 (최신 순)
        const tableBody = document.getElementById('noticeTableBody');
        tableBody.insertBefore(newRow, tableBody.firstChild);
        document.getElementById('title').value = '';
        document.getElementById('content').value = '';

        const deleteButton = newRow.querySelector('.delete-btn');
        deleteButton.addEventListener('click', function () {
            const id = this.getAttribute('data-id');
            deleteBoard(id);
        });

        alert('공지사항이 등록되었습니다.');
    }
</script>



<style>
    #adminNotice {
        background-color: #ff8108;
        width: 302px;
    }

    #tableWrapper {
        overflow-x: hidden;
        overflow-y: scroll;
        height: 300px;
    }

    #tableWrapper th {
        position: sticky;
        top: 0px;
    }

    #adminContent {
        width: 80%;
    }

    /* 현대적인 테이블 컨테이너 */
    .table-container {
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        overflow: hidden;
        margin-bottom: 2rem;
    }

    .table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem;
        background: linear-gradient(135deg, var(--color-neutral-50) 0%, var(--color-neutral-100) 100%);
        border-bottom: 1px solid var(--color-neutral-200);
    }

    .table-title {
        margin: 0;
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--color-neutral-800);
        display: flex;
        align-items: center;
    }

    .table-actions {
        display: flex;
        gap: 0.5rem;
    }

    .table-wrapper {
        overflow-x: auto;
        overflow-y: auto;
        max-height: 500px;
    }

    /* 현대적인 테이블 스타일 */
    .modern-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.875rem;
    }

    .modern-table thead th {
        background: var(--color-neutral-100);
        color: var(--color-neutral-700);
        font-weight: 600;
        padding: 1rem 0.75rem;
        text-align: left;
        border-bottom: 2px solid var(--color-neutral-200);
        position: sticky;
        top: 0;
        z-index: 10;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .modern-table tbody tr {
        transition: all 0.2s ease;
        border-bottom: 1px solid var(--color-neutral-100);
    }

    .modern-table tbody tr:hover {
        background-color: var(--color-neutral-50);
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .modern-table tbody td {
        padding: 1rem 0.75rem;
        vertical-align: middle;
    }

    /* 액션 버튼 */
    .action-btn {
        width: 36px;
        height: 36px;
        border: none;
        border-radius: 8px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.875rem;
    }

    .delete-btn {
        background: var(--color-danger);
        color: white;
    }

    .delete-btn:hover {
        background: #dc2626;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);
    }

    /* 스크롤바 스타일 */
    .table-wrapper::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    .table-wrapper::-webkit-scrollbar-track {
        background: var(--color-neutral-100);
        border-radius: 4px;
    }

    .table-wrapper::-webkit-scrollbar-thumb {
        background: var(--color-neutral-300);
        border-radius: 4px;
    }

    .table-wrapper::-webkit-scrollbar-thumb:hover {
        background: var(--color-neutral-400);
    }

    /* 반응형 */
    @media (max-width: 768px) {
        .table-header {
            flex-direction: column;
            gap: 1rem;
            align-items: stretch;
        }

        .table-actions {
            justify-content: center;
        }

        .modern-table {
            font-size: 0.75rem;
        }

        .modern-table thead th,
        .modern-table tbody td {
            padding: 0.5rem;
        }

        .action-btn {
            width: 32px;
            height: 32px;
        }
    }
</style>


<!-- 안쪽 내용 -->
<div id="adminContent">

    <div class="col-10 ms-3">
        <form action="./noticeUpdate" method="post" enctype="multipart/form-data">

            <div class="form-group mb-3">
                <label class="form-label" for="title">제목</label>
                <input type="text" class="form-control" name="title" id="title">
            </div>

            <div class="form-group mb-3">
                <label class="form-label" for="content">본문</label>
                <textarea class="form-control" name="content" id="content"></textarea>
            </div>

            <!-- <div class="form-group mb-3"> -->
            <!-- 	<label class="form-label" for="file">첨부파일</label> -->
            <!-- 	<input type="file" class="form-control" name="file" id="file" multiple="multiple"> -->
            <!-- </div> -->

            <!-- <div class="text-center"> -->
            <div id="submitBtn">
                <button class="btn btn-primary" id="btnWrite">작성</button>
                <button type="reset" class="btn btn-danger" id="btnCancel">취소</button>
            </div><!-- #submitBtn -->

        </form>
    </div><!-- .col-10 mx-auto -->

    <hr>

    <!-- 작성한 공지 목록 -->
    <div class="table-container">
        <div class="table-header">
            <h3 class="table-title">
                <i class="fas fa-bullhorn text-info me-2"></i>
                공지사항 목록
            </h3>
        </div>
        <div id="tableWrapper" class="table-wrapper">
            <table id="noticeTable" class="modern-table">
                <thead>
                    <tr>
                        <th>제목</th>
                        <th>내용</th>
                        <th>작성날짜</th>
                        <th>삭제</th>
                    </tr>
                </thead>
                <tbody id="noticeTableBody">
                    <tr id="row1">
                        <td>2024년 정기 점검 안내</td>
                        <td class="text-truncate" style="max-width: 300px;" title="2024년 10월 15일부터 10월 20일까지 시스템 정기 점검이 진행됩니다. 이 기간 동안 서비스 이용이 제한될 수 있습니다.">2024년 10월 15일부터 10월 20일까지 시스템 정기 점검이 진행됩니다. 이 기간 동안 서비스 이용이 제한될 수 있습니다.</td>
                        <td>2024-10-15</td>
                        <td>
                            <button class="action-btn delete-btn" data-id="1" title="삭제">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr id="row2">
                        <td>신규 서비스 런칭</td>
                        <td class="text-truncate" style="max-width: 300px;" title="2024년 11월 1일 새로운 서비스가 런칭됩니다. 많은 관심 부탁드립니다!">2024년 11월 1일 새로운 서비스가 런칭됩니다. 많은 관심 부탁드립니다!</td>
                        <td>2024-10-10</td>
                        <td>
                            <button class="action-btn delete-btn" data-id="2" title="삭제">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr id="row3">
                        <td>추가 휴무 안내</td>
                        <td class="text-truncate" style="max-width: 300px;" title="2024년 10월 5일(금요일)은 추석 연휴로 인해 휴무합니다. 양해 부탁드립니다.">2024년 10월 5일(금요일)은 추석 연휴로 인해 휴무합니다. 양해 부탁드립니다.</td>
                        <td>2024-10-05</td>
                        <td>
                            <button class="action-btn delete-btn" data-id="3" title="삭제">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <tr id="row4">
                        <td>시스템 업데이트 완료</td>
                        <td class="text-truncate" style="max-width: 300px;" title="시스템 업데이트가 완료되었습니다. 사용자 여러분의 많은 이용 바랍니다.">시스템 업데이트가 완료되었습니다. 사용자 여러분의 많은 이용 바랍니다.</td>
                        <td>2024-10-01</td>
                        <td>
                            <button class="action-btn delete-btn" data-id="4" title="삭제">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div><!-- .table-container -->


</div><!-- #adminContent -->


</body>

</html>